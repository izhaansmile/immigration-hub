<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Immigration Resource Hub</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <h1>Documented NY — Latest 20 English Articles</h1>
  <div id="news">Loading articles...</div>

  <!-- Load franc-min language detection library -->
  <script src="https://cdn.jsdelivr.net/npm/franc-min@5.0.0/franc.min.js"></script>
  <script>
    fetch("https://api.rss2json.com/v1/api.json?rss_url=https://documentedny.com/feed/")
      .then(res => res.json())
      .then(data => {
        const container = document.getElementById("news");
        container.innerHTML = '';

        // Filter articles by language detected as English ("eng")
        const englishItems = data.items.filter(item => {
          const text = (item.title + " " + item.description);
          const lang = franc.min(text);
          return lang === 'eng';
        });

        if (englishItems.length === 0) {
          container.innerHTML = "<p>No English articles found.</p>";
          return;
        }

        englishItems.slice(0, 20).forEach(item => {
          const div = document.createElement("div");
          div.className = "item";
          div.innerHTML = `
            <a href="${item.link}" target="_blank" rel="noopener">${item.title}</a>
            <time>${new Date(item.pubDate).toLocaleDateString()}</time>
            <p>${item.description}</p>
          `;
          container.appendChild(div);
        });
      })
      .catch(err => {
        console.error(err);
        document.getElementById("news").innerHTML = "<p>Error loading articles.</p>";
      });
  </script>
  <footer>
    <p>Last updated: July 2025 • Built for community use</p>
  </footer
</body>
</html>